function genesis_confirm(text){return genesis.confirm(text)}window.genesis={settingsChanged:!1,onboardingTasks:genesis_onboarding.tasks,categoryChecklistToggleInit:function(){jQuery('<p><span id="genesis-category-checklist-toggle" class="button">'+genesisL10n.categoryChecklistToggle+"</span></p>").insertBefore("ul.categorychecklist"),jQuery(document).on("click.genesis.genesis_category_checklist_toggle","#genesis-category-checklist-toggle",genesis.categoryChecklistToggle)},categoryChecklistToggle:function(event){var event=jQuery(event.target),checkboxes=event.parent().next().find(":checkbox");event.data("clicked")?(checkboxes.removeAttr("checked"),event.data("clicked",!1)):(checkboxes.attr("checked","checked"),event.data("clicked",!0))},toggleSettingsInit:function(){jQuery.each(genesis_toggles,function(k,v){var data={selector:v[0],showSelector:v[1],checkValue:v[2]};jQuery("div.genesis-metaboxes").on("change.genesis.genesis_toggle",v[0],data,genesis.toggleSettings),jQuery(v[0]).trigger("change.genesis_toggle",data)})},toggleSettings:function(event){var $selector=jQuery(event.data.selector),$showSelector=jQuery(event.data.showSelector),event=event.data.checkValue;jQuery.isArray(event)&&-1<jQuery.inArray($selector.val(),event)||"_unchecked"===event&&$selector.is(":not(:checked)")||"_checked"===event&&$selector.is(":checked")||"_unchecked"!==event&&"_checked"!==event&&$selector.val()===event?jQuery($showSelector).slideDown("fast"):jQuery($showSelector).slideUp("fast")},updateCharacterCount:function(event){jQuery("#"+event.target.id+"_chars").html(jQuery(event.target).val().length.toString())},layoutHighlighter:function(event){jQuery('input[name="'+jQuery(event.target).attr("name")+'"]').parent("label").removeClass("selected"),jQuery(event.currentTarget).addClass("selected")},confirm:function(text){return confirm(text)},attachUnsavedChangesListener:function(){jQuery("div.genesis-metaboxes :input").change(function(){genesis.registerChange()}),window.onbeforeunload=function(){if(genesis.settingsChanged)return genesisL10n.saveAlert},jQuery('div.genesis-metaboxes input[type="submit"]').click(function(){window.onbeforeunload=null})},registerChange:function(){genesis.settingsChanged=!0},confirmUpgrade:function(){return confirm(genesisL10n.confirmUpgrade)},confirmReset:function(){return confirm(genesisL10n.confirmReset)},doOnboardingTask:function(task,step){task=task||"dependencies",step=step||0,-1===jQuery.inArray(task,genesis.onboardingTasks)?genesis.completeOnboarding():(genesis.toggleOnboardingTaskStatus(task,"processing"),jQuery.ajax({data:{action:"genesis_do_onboarding_process",task:task,step:step,nonce:genesis_onboarding.nonce},type:"post",dataType:"json",url:ajaxurl,success:function(response){if(response.data.homepage_edit_link&&jQuery("#genesis-onboarding-edit-homepage").attr("href",response.data.homepage_edit_link),!0===response.data.complete)return genesis.toggleOnboardingTaskStatus(task,"done"),genesis.onboardingTasks.shift(),genesis.onboardingTasks.length?(genesis.toggleOnboardingTaskStatus(genesis.onboardingTasks[0],"processing"),void window.setTimeout(function(){genesis.doOnboardingTask(genesis.onboardingTasks[0],0)},2e3)):void genesis.completeOnboarding();genesis.toggleOnboardingTaskStatus(genesis.onboardingTasks[0],"processing"),window.setTimeout(function(){genesis.doOnboardingTask(response.data.task,response.data.next_step)},2e3)}}))},toggleOnboardingTaskStatus:function(task,status){if(-1!==jQuery.inArray(task,genesis.onboardingTasks)){var current_task=jQuery(".genesis-onboarding-task-"+task);switch(status){case"processing":current_task.addClass("genesis-onboarding-list-processing"),wp.a11y.speak(genesis_onboarding.l10n.a11y.step_started,"polite");break;case"done":current_task.addClass("genesis-onboarding-list-done").removeClass("genesis-onboarding-list-processing"),wp.a11y.speak(genesis_onboarding.l10n.a11y.step_completed,"polite")}}},completeOnboarding:function(){window.setTimeout(function(){jQuery(".genesis-onboarding-task-final").addClass("genesis-onboarding-list-done")},300),wp.a11y.speak(genesis_onboarding.l10n.a11y.onboarding_complete,"polite")},onboardingInstallPack:function(pack){pack&&jQuery.ajax({data:{action:"genesis_do_onboarding_pack_selection",pack:pack,nonce:genesis_onboarding.nonce},type:"post",dataType:"json",url:ajaxurl,success:function(response){response.data.tasks&&(genesis_onboarding.tasks=response.data.tasks,genesis.onboardingTasks=genesis_onboarding.tasks),($overlayCloseButton=jQuery("#js-modal-close")).length&&$overlayCloseButton.click(),jQuery(".genesis-onboarding-starter-packs").addClass("genesis-onboarding-area-hidden"),response.data.tasks.includes("dependencies")&&jQuery(".genesis-onboarding-task-dependencies").addClass("genesis-onboarding-area-visible").removeClass("genesis-onboarding-area-hidden"),(response.data.tasks.includes("content")||response.data.hasMenus)&&jQuery(".genesis-onboarding-task-content").addClass("genesis-onboarding-area-visible").removeClass("genesis-onboarding-area-hidden"),window.setTimeout(function(){genesis.doOnboardingTask(genesis.onboardingTasks[0],0)},500)}})},ready:function(){genesis.categoryChecklistToggleInit(),genesis.toggleSettingsInit(),genesis.attachUnsavedChangesListener(),jQuery("#genesis_title, #genesis_description").on("keyup.genesis.genesis_character_count",genesis.updateCharacterCount),jQuery(".genesis-layout-selector").on("change.genesis.genesis_layout_selector","label",genesis.layoutHighlighter),jQuery(".genesis-js-confirm-upgrade").on("click.genesis.genesis_confirm_upgrade",genesis.confirmUpgrade),jQuery(".genesis-js-confirm-reset").on("click.genesis.genesis_confirm_reset",genesis.confirmReset),jQuery("#genesis-onboarding-start").on("click",function(event){jQuery(this).prop("disabled",!0).addClass("genesis-onboarding-button-disabled"),jQuery("#genesis-onboarding-settings-link").prop("disabled",!0).prop("tabindex","-1"),wp.a11y.speak(genesis_onboarding.l10n.a11y.onboarding_started,"polite"),genesis.doOnboardingTask(event.target.dataset.task,event.target.dataset.step)}),jQuery("body").on("click",".genesis-install-pack",function(event){jQuery(".genesis-install-pack").prop("disabled",!0),genesis.onboardingInstallPack(event.target.dataset.pack)}),jQuery(".genesis-onboarding-page-starter-packs .pack-image").keypress(function(event){13===event.which&&(jQuery(this).click(),event.preventDefault())})}},jQuery(genesis.ready);